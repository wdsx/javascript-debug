define(function(){function l(e){if(r&&(i||!t||!t.log)){r.apply(window,e)}}function c(e){return s>0?s>e:o.length+s<=e}var e=Array.prototype.slice,t=window.console,n={},r,i,s=9,o=["error","warn","info","debug","log"],u="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),a=u.length,f=[];while(--a>=0){(function(e){n[e]=function(){s!==0&&t&&t[e]&&t[e].apply(t,arguments)}})(u[a])}a=o.length;while(--a>=0){(function(r,i){n[i]=function(){var n=e.call(arguments),s=[i].concat(n);f.push(s);l(s);if(!t||!c(r)){return}t.firebug?t[i].apply(window,n):t[i]?t[i](n):t.log(n)}})(a,o[a])}n.setLevel=function(e){s=typeof e==="number"?e:9};n.setCallback=function(){var t=e.call(arguments),n=f.length,s=n;r=t.shift()||null;i=typeof t[0]==="boolean"?t.shift():false;s-=typeof t[0]==="number"?t.shift():n;while(s<n){l(f[s++])}};return n})